# 1.1.2  Historial Bash

Si te es importante mantener un registro de los comandos que se han introducido en el shell. Bash afortunadamente mantiene un historial de comandos que se han introducido, que se puede mostrar con el comando de **`history`**.

```
$ history | more
1  yaourt -S yay                                                           
2  ls
3  cd Documents 
4  cd ..
```

En este ejemplo redirecciono el estándar input a more, porque yo guardo 10,000 líneas en el historial, solo quería ver lo primero, más adelante habrá más información acerca de redireccionar las salidas de un programa.

{% content-ref url="1.1.3-tuberias-y-redireccion.md" %}
[1.1.3-tuberias-y-redireccion.md](1.1.3-tuberias-y-redireccion.md)
{% endcontent-ref %}

En lugar de volver a escribir un comando, podemos hacer uso de **`history`**. Por ejemplo, mirando hacia atrás en el listado, hay tres comandos en nuestro historial con un número de línea que precede a cada uno. Para volver a ejecutar el tercer comando, simplemente escribimos el **`!`**carácter seguido del número de línea, en este caso 3, para ejecutar el comando **`cd Documents`**:

```
$ !3

$ cd Documents

$ pwd
/home/gazette/Documents
```

Otro atajo de historial útil es`!!`, que repite el último comando que se ejecutó durante nuestra sesión de terminal:

```
$ ping -c 1 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=115 time=19.3 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 19.251/19.251/19.251/0.000 ms

$ !!

$ ping -c 1 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=115 time=19.4 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 19.435/19.435/19.435/0.000 ms

```

De forma predeterminada, el historial de comandos se guarda en el archivo **.bash_history** en el directorio principal del usuario. Dos variables de entorno controlan el tamaño del historial: **HISTSIZE** e **HISTFILESIZE**.

**HISTSIZE** controla el número de comandos almacenados en la memoria para la sesión actual y **HISTFILESIZE** configura cuántos comandos se guardan en el archivo de historial. Estas variables se pueden editar según nuestras necesidades y guardar en el archivo de configuración bash (**.bashrc**) que exploraremos más adelante.

En mi caso uso zsh por lo que el nombre del archivo se llama diferente, pero está ubicado en el mismo directorio, mi archivo tiene 8979 líneas por lo tanto quiere decir que he escrito esa cantidad de comandos.

```
$ ls -l .zsh_history
.rw------- gazette gazette 612 KB Sunescrito Oct 17 12:38:21 2021 .zsh_history

cat .zsh_history | wc -l
8979
```

Por último, mantener presionada la tecla `Ctrl` y presionar `R` invocará la función de búsqueda inversa. Por ejemplo, escribimos c, y obtendrá una coincidencia para el comando más reciente de su historial que contiene la letra "c". Sigue escribiendo para reducir tu coincidencia y cuando encuentres el comando deseado, presiona `Return` para ejecutar.

En mi caso al usar zsh, por lo que se me muestra de la siguiente manera, solo escribiría por ejemplo **`nmap`** y me traerá los resultados de forma visible.

![\\](<../../../.gitbook/assets/image (127).png>)

{% embed url="https://www.digitalocean.com/community/tutorials/how-to-use-bash-history-commands-and-expansions-on-a-linux-vps" %}
