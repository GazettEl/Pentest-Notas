# 1.1.6 Comparación de archivos

La comparación de archivos puede parecer irrelevante, pero los administradores de sistemas, ingenieros de red, pentesters, soporte de TI y muchos otros profesionales confían en esta habilidad con bastante frecuencia.

En esta sección, echaremos un vistazo a un par de herramientas que pueden ayudar a agilizar el proceso a menudo tedioso pero gratificante de la comparación de archivos.

## comm

El comando **`comm`** compara dos archivos de texto, mostrando las líneas que son únicas para cada uno, así como las líneas que tienen en común. Genera tres columnas de desplazamiento de espacio: 

1. la primera contiene líneas que son exclusivas del primer archivo o argumento; 
2. el segundo contiene líneas que son exclusivas del segundo archivo o argumento; y 
3. la tercera columna contiene líneas que son compartidas por ambos archivos.

El parametro **`-n`**, donde "n" es 1, 2 o 3, se puede usar para suprimir una o más columnas, dependiendo de la necesidad. Echemos un vistazo a un ejemplo:

```
$ cat ips-20.txt
20.20.20.21
20.20.20.22
20.20.20.22
20.20.20.23
20.20.20.24
20.20.20.25
20.20.20.26

$ cat ips-21.txt
20.20.20.27
20.20.20.28
20.20.20.24
20.20.20.30
20.20.20.21
20.20.20.19
20.20.20.22

$ comm ips-20.txt ips-21.txt
	20.20.20.19
		20.20.20.21
		20.20.20.22
20.20.20.22
20.20.20.23
		20.20.20.24
20.20.20.25
20.20.20.26
	20.20.20.27
	20.20.20.28
	20.20.20.30

$ comm ips-21.txt ips-20.txt
20.20.20.19
		20.20.20.21
		20.20.20.22
	20.20.20.22
	20.20.20.23
		20.20.20.24
	20.20.20.25
	20.20.20.26
20.20.20.27
20.20.20.28
20.20.20.30
```

{% embed url="https://www.geeksforgeeks.org/comm-command-in-linux-with-examples" %}

{% embed url="https://www.thegeekdiary.com/comm-command-in-linux-with-examples" %}

## diff

El comando **`diff`** se utiliza para detectar diferencias entre archivos, similar al comando **`comm`**. Sin embargo, **`diff`** es mucho más complejo y admite muchos formatos de salida. Dos de los formatos más populares incluyen el formato de contexto (-c) y el formato unificado (-u).

```
$ diff -c ips-20.txt ips-21.txt
*** ips-20.txt	2021-10-17 18:17:06.998341800 -0500
--- ips-21.txt	2021-10-17 18:27:37.059032830 -0500
***************
*** 1,7 ****
  20.20.20.21
  20.20.20.22
! 20.20.20.22
! 20.20.20.23
  20.20.20.24
! 20.20.20.25
  20.20.20.26
--- 1,7 ----
  20.20.20.21
+ 20.20.20.20
  20.20.20.22
! 20.20.20.21
  20.20.20.24
! 20.20.20.23
  20.20.20.26

$ diff -u ips-20.txt ips-21.txt
--- ips-20.txt	2021-10-17 18:17:06.998341800 -0500
+++ ips-21.txt	2021-10-17 18:27:37.059032830 -0500
@@ -1,7 +1,7 @@
 20.20.20.21
+20.20.20.20
 20.20.20.22
-20.20.20.22
-20.20.20.23
+20.20.20.21
 20.20.20.24
-20.20.20.25
+20.20.20.23
 20.20.20.26
```

La salida utiliza el indicador "-" para mostrar que la línea aparece en el primer archivo, pero no en el segundo.

Por el contrario, el indicador "+" muestra que la línea aparece en el segundo archivo, pero no en el primero.

La diferencia más notable entre estos formatos es que el formato unificado no muestra líneas que coincidan entre archivos, lo que hace que los resultados sean más cortos. Los indicadores tienen un significado idéntico en ambos formatos.

{% embed url="https://www.geeksforgeeks.org/diff-command-linux-examples" %}

{% embed url="https://linuxhandbook.com/diff-command" %}
