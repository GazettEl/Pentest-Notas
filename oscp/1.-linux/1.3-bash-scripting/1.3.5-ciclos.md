# 1.3.5 Ciclos

Los bucles/ciclos/iteración nos ayudan con tareas repetitivas que necesitamos ejecutar hasta que se cumple un determinado criterio. En Bash, los dos comandos de bucle son **`for`** y **`while`**.

### For

La manera más simple de realizar un bucle es en one-liners. Este tipo de bucle se utiliza para realizar un conjunto determinado de comandos para cada uno de los elementos de una lista. Veamos brevemente su sintaxis general:

```bash
for nombre-variable in <lista>; do
     <acción a realizar>
done
```

El bucle **`for`** tomará cada elemento de la lista (en orden), asignará ese elemento como el valor de la variable **`nombre-variable`**, realizará la acción dada entre **`do`** y **`done`**, y luego volverá a la parte superior, tomará el siguiente elemento de la lista y repetirá los pasos hasta que se agote la lista.

Echemos un vistazo a un ejemplo más práctico que imprimirá rápidamente las primeras 10 direcciones IP en la subred 10.11.1.0/24:

```bash
❯ for ip in $(seq 1 10); do echo "10.10.10.$ip"; done
10.10.10.1
10.10.10.2
10.10.10.3
10.10.10.4
10.10.10.5
10.10.10.6
10.10.10.7
10.10.10.8
10.10.10.9
10.10.10.10
```

Usamos el comando **`seq`** para imprimir una secuencia de números, en este caso los números del uno al diez. Cada número se asigna a la variable **`ip`**, y luego cada dirección IP se muestra en la pantalla a medida que el bucle for se ejecuta varias veces, saliendo al final de la secuencia.

Otra forma de reescribir el bucle anterior implica **`brace expansion`** utilizando rangos. **`Brace expansion`** usando rangos se escribe dando el primer y último valor del rango y puede ser una secuencia de números o caracteres. Esto se conoce como una "expresión de secuencia"

```bash
❯ for ip in {1..10}; do echo "10.10.10.$ip"; done
10.10.10.1
10.10.10.2
10.10.10.3
10.10.10.4
10.10.10.5
10.10.10.6
10.10.10.7
10.10.10.8
10.10.10.9
10.10.10.10
```

### While

Los bucles **`While`** también son bastante comunes y ejecutan código mientras una expresión es verdadera. Los bucles **`While`** tienen un formato simple y, como sí, usara los corchetes **`[ ]`** para la prueba:

```bash
while [ <comprobar algo> ]; do
     <acción a realizar>
done
```

Vamos a volver a crear el ejemplo anterior con un bucle While:

```bash
❯ cat ./while.sh
#!/bin/bash

contador=1

while [ $contador -lt 10 ]; do
     echo "10.11.1.$contador"
     ((contador++))
done

❯ chmod +x while.sh
❯ ./while.sh
10.11.1.1
10.11.1.2
10.11.1.3
10.11.1.4
10.11.1.5
10.11.1.6
10.11.1.7
10.11.1.8
10.11.1.9
```

Este no es el resultado que esperábamos.  En el ejemplo anterior, usamos -lt (menos que) en lugar de -le (menor o igual que), por lo que nuestro contador solo llegó a nueve, no a diez como se pretendía originalmente. La línea **`((counter++))`** utiliza la construcción de doble paréntesis **`(( ))`** para realizar la expansión aritmética y la evaluación al mismo tiempo. En este caso particular, lo usamos para aumentar nuestra variable de contador en una. Reescribamos el bucle **`while`** y volvamos a probar el ejemplo:

```bash
❯ cat ./while.sh
#!/bin/bash

contador=1

while [ $contador -le 10 ]; do
     echo "10.11.1.$contador"
     ((contador++))
done

❯ chmod +x while.sh

❯ ./while.sh
10.11.1.1
10.11.1.2
10.11.1.3
10.11.1.4
10.11.1.5
10.11.1.6
10.11.1.7
10.11.1.8
10.11.1.9
10.11.1.10
```

{% embed url="https://ryanstutorials.net/bash-scripting-tutorial/bash-loops.php" %}
