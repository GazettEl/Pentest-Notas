# Networking

## Protocols

* In a computer network, machines talk to each other by means of **protocols**.
* There is a large variety of networking protocols on the internet, each one with its own purpose.

### Packets

The primary goal of networking is to exchange information between networked computers; this information carried by **packets**.

IP protocol header is at least 160 bits (20 bytes) long, and it includes information to interpret the content of the IP packet. 

* The first four bits identify the IP version. Today they can be used to represent IP version 4 or 6.
* The 32 bis starting at 96 represent the source address.
* The following four bytes represent the destination address.

![](<../../.gitbook/assets/image (19).png>)

### Protocols Layers

In 1984, the International Organization of Standardization (ISO) published a theoretical model of network system communication: the Open System Interconnection (OSI) model. The ISO/OSI model was never implemented, but it is widely used in literature or when talking about IT networks

ISO/OSI consists of seven layers and is used as a reference for the implementation of actual protocols.

| TCP/IP                                                          | OSI                                                                                                              |
| --------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| <p>Application</p><p>Transport</p><p>Network</p><p>Physical</p> | <p>Application</p><p>Presentation</p><p>Session</p><p>Transport</p><p>Network</p><p>Data Link</p><p>Physical</p> |

### Encapsulation

The idea is simple. The entire **upper protocol packet** (header plus payload) is the **payload** of the lower one; this is called **encapsulation**.

{% embed url="https://geek-university.com/ccna/data-encapsulation-in-the-osi-model/" %}

## IP

The** Internet Protocol **(IP) is the protocol that runs on the Internet layer of the Internet Protocol suite, also known as TCP/IP. IP is in charge of delivering the **datagrams** (IP Packet are called datagrams) to the hosts involved in communication, and it uses **IP addresses** to identify a host.

### IPv4

* The vast majority of network run IP version 4 (IPv4)
* An IPv4 address consists of four bytes, or octets; a byte consists of 8 bits.
* This does not mean that you can assign any address starting from 0.0.0.0 to 255.255.255.255 to a host. Some addresses are **reserved** for special proposes.

| Reserved intervals            | Purpose                   |
| ----------------------------- | ------------------------- |
| 0.0.0.0 - 0.255.255.255       | Represent "this" network. |
| 127.0.0.0 - 127.255.255.255   | Local host.               |
| 192.168.0.0 - 192.168.255.255 | Private networks.         |

To fully identify a host, you also need to know its **network**. To do that, you will need an IP address a **netmask**, or subnet mask. With an IP/netmask pair, you can identify the network part and the host part of an IP address.

* IP address: 192.168.5.100
* Subnet mask: 255.255.255.0

IP/Mask CIDR Example

|                 | Decimal       | Binary                              |
| --------------- | ------------- | ----------------------------------- |
| Host IP Address | 192.168.33.12 | 11000000.10101000.00100001.00001100 |
| Mask            | 255.255.224.0 | 11111111.11111111.11100000.00000000 |
| Network         | 192.168.32.0  | 11000000.10101000.00100000.00000000 |

* _192.168.32.0/19 CIDR notation._

IP/Mask Host

|                               | Decimal       | Binary                              |
| ----------------------------- | ------------- | ----------------------------------- |
| Host IP Address               | 192.168.33.12 | 11000000.10101000.00100001.00001100 |
| Mask                          | 255.255.224.0 | 11111111.11111111.11100000.00000000 |
| Network                       | 192.168.32.0  | 11000000.10101000.00100000.00000000 |
| NOT Mask                      | 255.255.224.0 | 00000000.00000000.00011111.11111111 |
| Host Part 'IP' AND 'NOT Mask' | 0.0.1.12      | 00000000.00000000.00000001.00001100 |

We have 13 bits to represent the hosts; this means that the network can contain 2^13 = 8192 different addresses.

{% embed url="https://www.subnet-calculator.com/cidr.php" %}

{% embed url="https://www.subnet-calculator.com/" %}

### IPv6

An IPv6 address consists of 16-bits hexadecimal numbers separated by colon (:). Hexadecimal numbers are case-insensitive. In case zeros occur, they can be skipped.

* IPv6 addresses examples:
  * Regular form: `2001:0db8:0020:130F:0000:0000:097C:130B`
  * Compressed form: `2001:0db8:0020:130F:::097C:130B`
* IP v4-compatible: `0:0:0:0:0:0:13.1.68.3` => `::13.1.68.3`
* Reserved addresses:
  * Loopback: `::1/128`
  * IPv4 mapped addresses: `::FFFF:0:0/96`
* IPv6 addresses can be split in half (64bits/each part).
  * Network part: Last 16 bits can be used only for specifying a subnet.
  * Device part: or Interface ID.
* IPv6 Scope
  * Global Unicast Address: scope internet - routed on internet
  * Unique Local: scope internal network or VPN - internally routable but not routed on Internet
  * Link Local: scope network link - not routed internally nor externally

## Routing

**Routers** are devices connected to different networks at the same time, forwarding IP datagrams from one network to another. They are able to forward IP datagrams from one network to another. The forwarding policy is based on **routing protocols**.

* Routing protocols are used to determine the best path to reach a network. They behave like a postman who tries to use the shortest path possible to deliver a letter.
* A router inspects the destination address of every incoming packet and then forwards it through one of its interface.
