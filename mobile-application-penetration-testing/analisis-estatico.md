# Análisis Estático

## Resumen de cómo sacar el APK de Play Store:

* Descargue la aplicación desde Play Store&#x20;
* En la terminal emite los siguientes comandos:&#x20;
  * **abd shel**l (esto te lleva a un shell en tu emulador o teléfono físico)&#x20;
  * **pm list packages | grep injured** (esto mostrará el nombre del paquete instalado en el teléfono, en nuestro caso hicimos grep injured, copia el resultado para el paso 5 de abajo)&#x20;
  * **pm path** (lista la ruta del archivo del paquete, copie la ruta del archivo para el paso 7 más abajo)&#x20;
  * **exit** (salir del shell adb)&#x20;
  * crear una nueva carpeta donde se almacenara la apk
  * **adb pull RutaDelPaquete RutaDelParqueteNuevo.apk** (esto sacará el apk de la ruta del archivo en el teléfono y lo guardará en el nombre de archivo que queramos

## Android Manifest.xml

Cada proyecto de aplicación debe tener un archivo AndroidManifest.xml (precisamente con ese nombre) en la raíz del conjunto de fuentes del proyecto. El archivo Mainfest.xml describe información esencial sobre su aplicación a las herramientas de construcción de Android, el sistema operativo Android y Google Play.

Entre otras muchas cosas, el archivo Mainfest.xml debe declarar lo siguiente:

* Los componentes de la aplicación, que incluyen todas las actividades, servicios, receptores de transmisión y proveedores de contenido. Cada componente debe definir propiedades básicas como el nombre de su clase Kotlin o Java. También puede declarar capacidades, como las configuraciones de dispositivos que puede manejar, y filtros de intención que describen cómo se puede iniciar el componente. Más información sobre los componentes de las aplicaciones.
* Los permisos que la aplicación necesita para acceder a partes protegidas del sistema o a otras aplicaciones. También declara los permisos que otras aplicaciones deben tener si quieren acceder al contenido de esta aplicación. Más información sobre los permisos.
* Las características de hardware y software que requiere la aplicación, que afectan a los dispositivos que pueden instalar la aplicación desde Google Play. Más información sobre la compatibilidad de los dispositivos.

Si utilizas Android Studio para crear tu aplicación, el archivo de manifiesto se crea por ti, y la mayoría de los elementos esenciales del manifiesto se añaden a medida que construyes tu aplicación (especialmente cuando utilizas plantillas de código).

Donde se definen los fundamentos de la aplicación:&#x20;

* minSDKVersion:
  * Valor entero que designa el nivel de API al cual se dirige la aplicación. Si no se configura, el valor predeterminado es igual al valor asignado a la minSdkVersion
* Permisos:&#x20;
  * Define a qué datos y componentes de hardware necesita acceder la aplicación:&#x20;
    * cámara&#x20;
    * contactos&#x20;
    * internet&#x20;
    * leer/escribir almacenamiento externo&#x20;
    * gestión de paquetes&#x20;
    * bluetooth&#x20;
    * Etc
* Actividades:
  * Básicamente, los elementos de la interfaz de usuario o las diferentes "pantallas" de la aplicación algunas actividades necesitan ser protegidas, ejemplos:&#x20;
    * detalles de la cuenta&#x20;
    * pantallas de transferencia de dinero&#x20;
    * pantallas ocultas&#x20;
  * A menudo se realiza a través de filtros de intención&#x20;
  * Una actividad exported="Ture" puede ser accesible desde fuera de la aplicación
* Proveedores de contenido:
  * se utiliza para servir datos de su aplicación a otras aplicaciones
    * a veces se utiliza para compartir datos entre un grupo de aplicaciones relacionadas
    * si los proveedores de contenido se exportan, esto puede ser muy peligroso y exponer los datos a cualquier usuario o aplicación en el dispositivo.



{% embed url="https://developer.android.com/guide/topics/manifest/manifest-intro" %}

{% embed url="https://developer.android.com/reference/android/Manifest.permission" %}





## Buscando información interesante&#x20;

Simplemente echando un vistazo a las cadenas del APK puedes buscar contraseñas, URLs (https://github.com/ndelphit/apkurlgrep), claves API, encriptación, uuids de bluetooth, tokens y cualquier cosa interesante... busca incluso puertas traseras de ejecución de código o puertas traseras de autenticación (credenciales de administrador codificadas en la aplicación).



